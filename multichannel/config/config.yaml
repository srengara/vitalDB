# Multi-Channel Early Fusion Model Configuration - Glucose Prediction

# Dataset Configuration
dataset:
  # Path to consolidated CSV file or directory containing per-channel CSVs
  csv_path: "Multi-channel-consolidated"
  test_split: 0.2
  validation_split: 0.1
  random_seed: 42

  # Channel names as they appear in the 'channel' column of the CSV
  channels:
    - force
    - Signal1
    - signal2
    - signal3

  # Target variable for glucose prediction
  target: "glucose_mg_dl"

  # Normalization
  normalize: true
  normalization_method: "minmax"  # Options: minmax, standard

# Preprocessing
preprocessing:
  remove_outliers: true
  outlier_threshold: 3  # Standard deviations

# Model Architecture
model:
  type: "early_fusion_cnn"  # Options: early_fusion_cnn, early_fusion_rnn, early_fusion_hybrid, early_fusion_resnet1d

  # These are auto-detected from data but set defaults here
  input_channels: 4    # 4 channels: force, Signal1, signal2, signal3
  sequence_length: 100  # 100 amplitude samples per window

  # CNN Layers
  conv_layers:
    - filters: 64
      kernel_size: 5
      activation: relu
      dropout: 0.3
    - filters: 128
      kernel_size: 5
      activation: relu
      dropout: 0.3
    - filters: 256
      kernel_size: 3
      activation: relu
      dropout: 0.3

  # Fully Connected Layers
  dense_layers:
    - units: 256
      activation: relu
      dropout: 0.5
    - units: 128
      activation: relu
      dropout: 0.3

  # Output Layer - linear activation for regression
  output_units: 1
  output_activation: linear

# Training Configuration
training:
  batch_size: 4  # Small batch size for small dataset
  epochs: 100
  learning_rate: 0.001
  optimizer: adam  # Options: adam, sgd, rmsprop
  loss_function: mse  # MSE for regression

  # Learning rate scheduler
  use_scheduler: true
  scheduler_type: reduce_on_plateau  # Options: reduce_on_plateau, exponential, cosine
  scheduler_params:
    factor: 0.5
    patience: 10
    min_lr: 0.00001

  # Early stopping
  use_early_stopping: true
  early_stopping_patience: 15
  early_stopping_metric: val_loss

  # Regularization
  l1_regularization: 0.0
  l2_regularization: 0.001

  # Augmentation
  use_data_augmentation: false
  augmentation_params:
    noise_std: 0.01
    time_shift: 5
    amplitude_scale: 0.1

# Validation Configuration
validation:
  batch_size: 4
  validation_frequency: 1  # Validate every N epochs
  metrics:
    - mse
    - mae

# Logging and Checkpoints
logging:
  log_dir: "./logs"
  checkpoint_dir: "./checkpoints"
  save_best_model: true
  save_frequency: 5  # Save checkpoint every N epochs
  verbose: 1

# Hardware Configuration
hardware:
  device: cuda  # Options: cuda, cpu
  mixed_precision: false
  num_workers: 0  # 0 for Windows compatibility
  pin_memory: false
